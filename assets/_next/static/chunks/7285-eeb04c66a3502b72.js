"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7285],{1361:(e,t,a)=>{a.d(t,{u6:()=>E});class i extends Event{track;constructor(e,t){super(e),this.track=t.track}}let r=new WeakMap;function n(e){var t,a;let i;return r.get(e)??(t=e,a={},(i=r.get(t))||r.set(t,i={}),Object.assign(i,a))}function s(e,t){let a=e.videoTracks;n(t).media=e,n(t).renditionSet||(n(t).renditionSet=new Set);let r=n(a).trackSet;r.add(t);let s=r.size-1;s in d.prototype||Object.defineProperty(d.prototype,s,{get(){return[...n(this).trackSet][s]}}),queueMicrotask(()=>{a.dispatchEvent(new i("addtrack",{track:t}))})}function o(e){let t=n(e).media?.videoTracks;t&&(n(t).trackSet.delete(e),queueMicrotask(()=>{t.dispatchEvent(new i("removetrack",{track:e}))}))}class d extends EventTarget{#e;#t;#a;constructor(){super(),n(this).trackSet=new Set}get #i(){return n(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find(t=>t.id===e)??null}get selectedIndex(){return[...this.#i].findIndex(e=>e.selected)}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),"function"==typeof e&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#t}set onremovetrack(e){this.#t&&(this.removeEventListener("removetrack",this.#t),this.#t=void 0),"function"==typeof e&&(this.#t=e,this.addEventListener("removetrack",e))}get onchange(){return this.#a}set onchange(e){this.#a&&(this.removeEventListener("change",this.#a),this.#a=void 0),"function"==typeof e&&(this.#a=e,this.addEventListener("change",e))}}class l extends Event{rendition;constructor(e,t){super(e),this.rendition=t.rendition}}function u(e){return[...n(e).media.videoTracks].filter(e=>e.selected).flatMap(e=>[...n(e).renditionSet])}class c extends EventTarget{#r;#n;#a;[Symbol.iterator](){return u(this).values()}get length(){return u(this).length}getRenditionById(e){return u(this).find(t=>`${t.id}`==`${e}`)??null}get selectedIndex(){return u(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[t,a]of u(this).entries())a.selected=t===e}get onaddrendition(){return this.#r}set onaddrendition(e){this.#r&&(this.removeEventListener("addrendition",this.#r),this.#r=void 0),"function"==typeof e&&(this.#r=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#n}set onremoverendition(e){this.#n&&(this.removeEventListener("removerendition",this.#n),this.#n=void 0),"function"==typeof e&&(this.#n=e,this.addEventListener("removerendition",e))}get onchange(){return this.#a}set onchange(e){this.#a&&(this.removeEventListener("change",this.#a),this.#a=void 0),"function"==typeof e&&(this.#a=e,this.addEventListener("change",e))}}class h{src;id;width;height;bitrate;frameRate;codec;#s=!1;get selected(){return this.#s}set selected(e){if(this.#s!==e){this.#s=e;var t=this;let a=n(t).media.videoRenditions;a&&!n(a).changeRequested&&(n(a).changeRequested=!0,queueMicrotask(()=>{delete n(a).changeRequested,n(t).track.selected&&a.dispatchEvent(new Event("change"))}))}}}class p{id;kind;label="";language="";sourceBuffer;#s=!1;addRendition(e,t,a,i,r,s){let o=new h;return o.src=e,o.width=t,o.height=a,o.frameRate=s,o.bitrate=r,o.codec=i,!function(e,t){let a=n(e).media.videoRenditions;n(t).media=n(e).media,n(t).track=e;let i=n(e).renditionSet;i.add(t);let r=i.size-1;r in c.prototype||Object.defineProperty(c.prototype,r,{get(){return u(this)[r]}}),queueMicrotask(()=>{e.selected&&a.dispatchEvent(new l("addrendition",{rendition:t}))})}(this,o),o}removeRendition(e){let t=n(e).media.videoRenditions,a=n(e).track;n(a).renditionSet.delete(e),queueMicrotask(()=>{n(e).track.selected&&t.dispatchEvent(new l("removerendition",{rendition:e}))})}get selected(){return this.#s}set selected(e){this.#s!==e&&(this.#s=e,!0===e&&function(e){let t=n(e).media.videoTracks??[],a=!1;for(let i of t)i!==e&&(i.selected=!1,a=!0);if(a){if(n(t).changeRequested)return;n(t).changeRequested=!0,queueMicrotask(()=>{delete n(t).changeRequested,t.dispatchEvent(new Event("change"))})}}(this))}}function m(e){return[...n(e).media.audioTracks].filter(e=>e.enabled).flatMap(e=>[...n(e).renditionSet])}class f extends EventTarget{#r;#n;#a;[Symbol.iterator](){return m(this).values()}get length(){return m(this).length}getRenditionById(e){return m(this).find(t=>`${t.id}`==`${e}`)??null}get selectedIndex(){return m(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[t,a]of m(this).entries())a.selected=t===e}get onaddrendition(){return this.#r}set onaddrendition(e){this.#r&&(this.removeEventListener("addrendition",this.#r),this.#r=void 0),"function"==typeof e&&(this.#r=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#n}set onremoverendition(e){this.#n&&(this.removeEventListener("removerendition",this.#n),this.#n=void 0),"function"==typeof e&&(this.#n=e,this.addEventListener("removerendition",e))}get onchange(){return this.#a}set onchange(e){this.#a&&(this.removeEventListener("change",this.#a),this.#a=void 0),"function"==typeof e&&(this.#a=e,this.addEventListener("change",e))}}class _{src;id;bitrate;codec;#s=!1;get selected(){return this.#s}set selected(e){if(this.#s!==e){this.#s=e;var t=this;let a=n(t).media.audioRenditions;a&&!n(a).changeRequested&&(n(a).changeRequested=!0,queueMicrotask(()=>{delete n(a).changeRequested,n(t).track.enabled&&a.dispatchEvent(new Event("change"))}))}}}function y(e,t){let a=e.audioTracks;n(t).media=e,n(t).renditionSet||(n(t).renditionSet=new Set);let r=n(a).trackSet;r.add(t);let s=r.size-1;s in b.prototype||Object.defineProperty(b.prototype,s,{get(){return[...n(this).trackSet][s]}}),queueMicrotask(()=>{a.dispatchEvent(new i("addtrack",{track:t}))})}function g(e){let t=n(e).media?.audioTracks;t&&(n(t).trackSet.delete(e),queueMicrotask(()=>{t.dispatchEvent(new i("removetrack",{track:e}))}))}class b extends EventTarget{#e;#t;#a;constructor(){super(),n(this).trackSet=new Set}get #i(){return n(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find(t=>t.id===e)??null}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),"function"==typeof e&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#t}set onremovetrack(e){this.#t&&(this.removeEventListener("removetrack",this.#t),this.#t=void 0),"function"==typeof e&&(this.#t=e,this.addEventListener("removetrack",e))}get onchange(){return this.#a}set onchange(e){this.#a&&(this.removeEventListener("change",this.#a),this.#a=void 0),"function"==typeof e&&(this.#a=e,this.addEventListener("change",e))}}class k{id;kind;label="";language="";sourceBuffer;#o=!1;addRendition(e,t,a){let i=new _;return i.src=e,i.codec=t,i.bitrate=a,!function(e,t){let a=n(e).media.audioRenditions;n(t).media=n(e).media,n(t).track=e;let i=n(e).renditionSet;i.add(t);let r=i.size-1;r in f.prototype||Object.defineProperty(f.prototype,r,{get(){return m(this)[r]}}),queueMicrotask(()=>{e.enabled&&a.dispatchEvent(new l("addrendition",{rendition:t}))})}(this,i),i}removeRendition(e){let t=n(e).media.audioRenditions,a=n(e).track;n(a).renditionSet.delete(e),queueMicrotask(()=>{n(e).track.enabled&&t.dispatchEvent(new l("removerendition",{rendition:e}))})}get enabled(){return this.#o}set enabled(e){if(this.#o!==e){this.#o=e;let t=n(this).media.audioTracks;t&&!n(t).changeRequested&&(n(t).changeRequested=!0,queueMicrotask(()=>{delete n(t).changeRequested,t.dispatchEvent(new Event("change"))}))}}}let w=x(globalThis.HTMLMediaElement,"video"),T=x(globalThis.HTMLMediaElement,"audio");function E(e){if(!e?.prototype)return e;let t=x(e,"video");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"videoTracks",{get(){var e=this;let t=n(e).videoTracks;if(!t&&(t=new d,n(e).videoTracks=t,w)){let a=w.call(e.nativeEl??e);for(let t of a)s(e,t);a.addEventListener("change",()=>{t.dispatchEvent(new Event("change"))}),a.addEventListener("addtrack",i=>{if([...t].some(e=>e instanceof p)){for(let e of a)o(e);return}s(e,i.track)}),a.addEventListener("removetrack",e=>{o(e.track)})}return t}});let a=x(e,"audio");(!a||`${a}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"audioTracks",{get(){var e=this;let t=n(e).audioTracks;if(!t&&(t=new b,n(e).audioTracks=t,T)){let a=T.call(e.nativeEl??e);for(let t of a)y(e,t);a.addEventListener("change",()=>{t.dispatchEvent(new Event("change"))}),a.addEventListener("addtrack",i=>{if([...t].some(e=>e instanceof k)){for(let e of a)g(e);return}y(e,i.track)}),a.addEventListener("removetrack",e=>{g(e.track)})}return t}}),"addVideoTrack"in e.prototype||(e.prototype.addVideoTrack=function(e,t="",a=""){let i=new p;return i.kind=e,i.label=t,i.language=a,s(this,i),i}),"removeVideoTrack"in e.prototype||(e.prototype.removeVideoTrack=o),"addAudioTrack"in e.prototype||(e.prototype.addAudioTrack=function(e,t="",a=""){let i=new k;return i.kind=e,i.label=t,i.language=a,y(this,i),i}),"removeAudioTrack"in e.prototype||(e.prototype.removeAudioTrack=g),"videoRenditions"in e.prototype||Object.defineProperty(e.prototype,"videoRenditions",{get(){return i(this)}});let i=e=>{let t=n(e).videoRenditions;return t||(n(t=new c).media=e,n(e).videoRenditions=t),t};"audioRenditions"in e.prototype||Object.defineProperty(e.prototype,"audioRenditions",{get(){return r(this)}});let r=e=>{let t=n(e).audioRenditions;return t||(n(t=new f).media=e,n(e).audioRenditions=t),t};return e}function x(e,t){if(e?.prototype)return Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`)?.get}},15278:(e,t,a)=>{let i;a.d(t,{J:()=>b});let r=new WeakMap;class n extends Error{}class s extends Error{}let o=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"];function d(){return globalThis.cast?.framework?.CastContext.getInstance()}function l(){return d()?.getCurrentSession()}function u(){return l()?.getSessionObj().media[0]}function c(e){return d().setOptions({...h(),...e})}function h(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}async function p(e){try{let t=(await fetch(e,{method:"HEAD"})).headers.get("Content-Type");return o.some(e=>t===e)}catch(e){return console.error("Error while trying to get the Content-Type of the manifest",e),!1}}async function m(e){try{let a=await (await fetch(e)).text(),i=a,r=function(e){let t=e.split("\n"),a=[];for(let e=0;e<t.length;e++)if(t[e].trim().startsWith("#EXT-X-STREAM-INF")){let i=t[e+1]?t[e+1].trim():"";i&&!i.startsWith("#")&&a.push(i)}return a}(a);if(r.length>0){let t=new URL(r[0],e).toString();i=await (await fetch(t)).text()}var t=i.split("\n").find(e=>!e.trim().startsWith("#")&&""!==e.trim());if(!t)return;let n=t.match(/\.([a-zA-Z0-9]+)(?:\?.*)?$/);return n?n[1]:null}catch(e){console.error("Error while trying to parse the manifest playlist",e);return}}let f=new(globalThis.WeakRef?class extends Set{add(e){super.add(new WeakRef(e))}forEach(e){super.forEach(t=>{let a=t.deref();a&&e(a)})}}:Set),_=new WeakSet;!function(e){globalThis.chrome?.cast?.isAvailable?globalThis.cast?.framework?e():customElements.whenDefined("google-cast-button").then(e):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(e)}}(()=>{if(!globalThis.chrome?.cast?.isAvailable)return void console.debug("chrome.cast.isAvailable",globalThis.chrome?.cast?.isAvailable);i||(i=cast.framework,d().addEventListener(i.CastContextEventType.CAST_STATE_CHANGED,e=>{f.forEach(t=>r.get(t).onCastStateChanged?.(e))}),d().addEventListener(i.CastContextEventType.SESSION_STATE_CHANGED,e=>{f.forEach(t=>r.get(t).onSessionStateChanged?.(e))}),f.forEach(e=>r.get(e).init?.()))});let y=0;class g extends EventTarget{#d;#l;#u;#c;#h="disconnected";#p=!1;#m=new Set;#v=new WeakMap;constructor(e){super(),this.#d=e,f.add(this),r.set(this,{init:()=>this.#f(),onCastStateChanged:()=>this.#_(),onSessionStateChanged:()=>this.#y(),getCastPlayer:()=>this.#g}),this.#f()}get #g(){if(_.has(this.#d))return this.#u}get state(){return this.#h}async watchAvailability(e){if(this.#d.disableRemotePlayback)throw new n("disableRemotePlayback attribute is present.");return this.#v.set(e,++y),this.#m.add(e),queueMicrotask(()=>e(this.#b())),y}async cancelWatchAvailability(e){if(this.#d.disableRemotePlayback)throw new n("disableRemotePlayback attribute is present.");e?this.#m.delete(e):this.#m.clear()}async prompt(){if(this.#d.disableRemotePlayback)throw new n("disableRemotePlayback attribute is present.");if(!globalThis.chrome?.cast?.isAvailable)throw new s("The RemotePlayback API is disabled on this platform.");let e=_.has(this.#d);_.add(this.#d),c(this.#d.castOptions),Object.entries(this.#c).forEach(([e,t])=>{this.#u.controller.addEventListener(e,t)});try{await d().requestSession()}catch(t){if(e||_.delete(this.#d),"cancel"===t)return;throw Error(t)}r.get(this.#d)?.loadOnPrompt?.()}#k(){_.has(this.#d)&&(Object.entries(this.#c).forEach(([e,t])=>{this.#u.controller.removeEventListener(e,t)}),_.delete(this.#d),this.#d.muted=this.#u.isMuted,this.#d.currentTime=this.#u.savedPlayerState.currentTime,!1===this.#u.savedPlayerState.isPaused&&this.#d.play())}#b(){let e=d()?.getCastState();return e&&"NO_DEVICES_AVAILABLE"!==e}#_(){let e=d().getCastState();if(_.has(this.#d)&&"CONNECTING"===e&&(this.#h="connecting",this.dispatchEvent(new Event("connecting"))),!this.#p&&e?.includes("CONNECT"))for(let e of(this.#p=!0,this.#m))e(!0);else if(this.#p&&(!e||"NO_DEVICES_AVAILABLE"===e))for(let e of(this.#p=!1,this.#m))e(!1)}async #y(){let{SESSION_RESUMED:e}=i.SessionState;if(d().getSessionState()===e&&this.#d.castSrc===u()?.media.contentId){_.add(this.#d),Object.entries(this.#c).forEach(([e,t])=>{this.#u.controller.addEventListener(e,t)});try{var t;await (t=new chrome.cast.media.GetStatusRequest,new Promise((e,a)=>{u().getStatus(t,e,a)}))}catch(e){console.error(e)}this.#c[i.RemotePlayerEventType.IS_PAUSED_CHANGED](),this.#c[i.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}}#f(){i&&!this.#l&&(this.#l=!0,c(this.#d.castOptions),this.#d.textTracks.addEventListener("change",()=>this.#w()),this.#_(),this.#u=new i.RemotePlayer,new i.RemotePlayerController(this.#u),this.#c={[i.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:e})=>{!0===e?(this.#h="connected",this.dispatchEvent(new Event("connect"))):(this.#k(),this.#h="disconnected",this.dispatchEvent(new Event("disconnect")))},[i.RemotePlayerEventType.DURATION_CHANGED]:()=>{this.#d.dispatchEvent(new Event("durationchange"))},[i.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{this.#d.dispatchEvent(new Event("volumechange"))},[i.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{this.#d.dispatchEvent(new Event("volumechange"))},[i.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{this.#g?.isMediaLoaded&&this.#d.dispatchEvent(new Event("timeupdate"))},[i.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{this.#d.dispatchEvent(new Event("resize"))},[i.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{this.#d.dispatchEvent(new Event(this.paused?"pause":"play"))},[i.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{this.#g?.playerState!==chrome.cast.media.PlayerState.PAUSED&&this.#d.dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[this.#g?.playerState]))},[i.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{this.#g?.isMediaLoaded&&(await Promise.resolve(),this.#T())}})}#T(){this.#w()}async #w(){let e;if(!this.#g)return;let t=(this.#u.mediaInfo?.tracks??[]).filter(({type:e})=>e===chrome.cast.media.TrackType.TEXT),a=[...this.#d.textTracks].filter(({kind:e})=>"subtitles"===e||"captions"===e),i=t.map(({language:e,name:t,trackId:i})=>{let{mode:r}=a.find(a=>a.language===e&&a.label===t)??{};return!!r&&{mode:r,trackId:i}}).filter(Boolean),r=i.filter(({mode:e})=>"showing"!==e).map(({trackId:e})=>e),n=i.find(({mode:e})=>"showing"===e),s=l()?.getSessionObj().media[0]?.activeTrackIds??[],o=s;if(s.length&&(o=o.filter(e=>!r.includes(e))),n?.trackId&&(o=[...o,n.trackId]),e=o=[...new Set(o)],!(s.length===e.length&&s.every(t=>e.includes(t))))try{let e=new chrome.cast.media.EditTracksInfoRequest(o);await new Promise((t,a)=>{u().editTracksInfo(e,t,a)})}catch(e){console.error(e)}}}let b=e=>class extends e{static observedAttributes=[...e.observedAttributes??[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"];#E={paused:!1};#x=h();#S;#R;get remote(){return this.#R?this.#R:globalThis.chrome?(this.disableRemotePlayback||function(){let e="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if(globalThis.chrome?.cast||document.querySelector(`script[src="${e}"]`))return;let t=document.createElement("script");t.src=e,document.head.append(t)}(),r.set(this,{loadOnPrompt:()=>this.#P()}),this.#R=new g(this)):super.remote}get #g(){return r.get(this.remote)?.getCastPlayer?.()}attributeChangedCallback(e,t,a){if(super.attributeChangedCallback(e,t,a),"cast-receiver"===e&&a){this.#x.receiverApplicationId=a;return}if(this.#g)switch(e){case"cast-stream-type":case"cast-src":this.load()}}async #P(){this.#E.paused=super.paused,super.pause(),this.muted=super.muted;try{await this.load()}catch(e){console.error(e)}}async load(){if(!this.#g)return super.load();let e=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);e.customData=this.castCustomData;let t=[...this.querySelectorAll("track")].filter(({kind:e,src:t})=>t&&("subtitles"===e||"captions"===e)),a=[],i=0;if(t.length&&(e.tracks=t.map(e=>{let t=++i;0===a.length&&"showing"===e.track.mode&&a.push(t);let r=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);return r.trackContentId=e.src,r.trackContentType="text/vtt",r.subtype="captions"===e.kind?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,r.name=e.label,r.language=e.srclang,r})),"live"===this.castStreamType?e.streamType=chrome.cast.media.StreamType.LIVE:e.streamType=chrome.cast.media.StreamType.BUFFERED,e.metadata=new chrome.cast.media.GenericMediaMetadata,e.metadata.title=this.title,e.metadata.images=[{url:this.poster}],p(this.castSrc)){let t=await m(this.castSrc);t?.includes("m4s")||t?.includes("mp4")?(e.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,e.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4):t?.includes("ts")&&(e.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.TS,e.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.TS)}let r=new chrome.cast.media.LoadRequest(e);r.currentTime=super.currentTime??0,r.autoplay=!this.#E.paused,r.activeTrackIds=a,await l()?.loadMedia(r),this.dispatchEvent(new Event("volumechange"))}play(){if(this.#g){this.#g.isPaused&&this.#g.controller?.playOrPause();return}return super.play()}pause(){if(this.#g){this.#g.isPaused||this.#g.controller?.playOrPause();return}super.pause()}get castOptions(){return this.#x}get castReceiver(){return this.getAttribute("cast-receiver")??void 0}set castReceiver(e){this.castReceiver!=e&&this.setAttribute("cast-receiver",`${e}`)}get castSrc(){return this.getAttribute("cast-src")??this.querySelector("source")?.src??this.currentSrc}set castSrc(e){this.castSrc!=e&&this.setAttribute("cast-src",`${e}`)}get castContentType(){return this.getAttribute("cast-content-type")??void 0}set castContentType(e){this.setAttribute("cast-content-type",`${e}`)}get castStreamType(){return this.getAttribute("cast-stream-type")??this.streamType??void 0}set castStreamType(e){this.setAttribute("cast-stream-type",`${e}`)}get castCustomData(){return this.#S}set castCustomData(e){let t=typeof e;if(!["object","undefined"].includes(t))return void console.error(`castCustomData must be nullish or an object but value was of type ${t}`);this.#S=e}get readyState(){if(this.#g)switch(this.#g.playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return this.#g?this.#g.isPaused:super.paused}get muted(){return this.#g?this.#g?.isMuted:super.muted}set muted(e){if(this.#g){(e&&!this.#g.isMuted||!e&&this.#g.isMuted)&&this.#g.controller?.muteOrUnmute();return}super.muted=e}get volume(){return this.#g?this.#g?.volumeLevel??1:super.volume}set volume(e){if(this.#g){this.#g.volumeLevel=+e,this.#g.controller?.setVolumeLevel();return}super.volume=e}get duration(){return this.#g&&this.#g?.isMediaLoaded?this.#g?.duration??NaN:super.duration}get currentTime(){return this.#g&&this.#g?.isMediaLoaded?this.#g?.currentTime??0:super.currentTime}set currentTime(e){if(this.#g){this.#g.currentTime=e,this.#g.controller?.seek();return}super.currentTime=e}}},45820:(e,t,a)=>{a.d(t,{A:()=>tO});var i=Object.create,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,l=function(e,t){return function(){return e&&(t=e(e=0)),t}},u=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},c=function(e,t,a,i){if(t&&"object"==typeof t||"function"==typeof t)for(var o,l=s(t),u=0,c=l.length;u<c;u++)o=l[u],d.call(e,o)||o===a||r(e,o,{get:(function(e){return t[e]}).bind(null,o),enumerable:!(i=n(t,o))||i.enumerable});return e},h=function(e,t,a){return a=null!=e?i(o(e)):{},c(!t&&e&&e.__esModule?a:r(a,"default",{value:e,enumerable:!0}),e)},p=u(function(e,t){t.exports="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}});function m(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):m(e,t)}var f=l(function(){f()});function _(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var y=l(function(){}),g=u(function(e,t){var a=Array.prototype.slice;t.exports=function(e,t){for(("length"in e)||(e=[e]),e=a.call(e);e.length;){var i=e.shift(),r=t(i);if(r)return r;i.childNodes&&i.childNodes.length&&(e=a.call(i.childNodes).concat(e))}}}),b=u(function(e,t){function a(e,t){if(!m(this,a))return new a(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}f(),t.exports=a,a.prototype.nodeType=8,a.prototype.nodeName="#comment",a.prototype.toString=function(){return"[object Comment]"}}),k=u(function(e,t){function a(e,t){if(!m(this,a))return new a(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}f(),t.exports=a,a.prototype.type="DOMTextNode",a.prototype.nodeType=3,a.prototype.nodeName="#text",a.prototype.toString=function(){return this.data},a.prototype.replaceData=function(e,t,a){var i=this.data,r=i.substring(0,e),n=i.substring(e+t,i.length);this.data=r+a+n,this.length=this.data.length}}),w=u(function(e,t){t.exports=function(e){var t=this,a=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var i=t.listeners[a];if(i)return i.forEach(function(a){e.currentTarget=t,"function"==typeof a?a(e):a.handleEvent(e)});t.parentNode&&t.parentNode.dispatchEvent(e)}}),T=u(function(e,t){t.exports=function(e,t){this.listeners||(this.listeners={}),this.listeners[e]||(this.listeners[e]=[]),-1===this.listeners[e].indexOf(t)&&this.listeners[e].push(t)}}),E=u(function(e,t){t.exports=function(e,t){if(this.listeners&&this.listeners[e]){var a=this.listeners[e],i=a.indexOf(t);-1!==i&&a.splice(i,1)}}}),x=u(function(e,t){y(),t.exports=function e(t){switch(t.nodeType){case 3:return r(t.data);case 8:return"\x3c!--"+t.data+"--\x3e";default:var n,s,o;return s=[],o=(n=t).tagName,"http://www.w3.org/1999/xhtml"===n.namespaceURI&&(o=o.toLowerCase()),s.push("<"+o+function(e){var t=[];for(var a in e)(function(e,t){var a=_(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===a||"boolean"===a||"number"===a)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t})(e,a)&&t.push({name:a,value:e[a]});for(var r in e._attributes)for(var n in e._attributes[r]){var s=e._attributes[r][n],o=(s.prefix?s.prefix+":":"")+n;t.push({name:o,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?i(t):""}(n)+function(e){var t=e.dataset,a=[];for(var r in t)a.push({name:"data-"+r,value:t[r]});return a.length?i(a):""}(n)),a.indexOf(o)>-1?s.push(" />"):(s.push(">"),n.childNodes.length?s.push.apply(s,n.childNodes.map(e)):n.textContent||n.innerText?s.push(r(n.textContent||n.innerText)):n.innerHTML&&s.push(n.innerHTML),s.push("</"+o+">")),s.join("")}};var a=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function i(e){var t=[];return e.forEach(function(e){var a=e.name,i=e.value;"style"===a&&(i=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach(function(a){var i=e[a];a=a.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),t+=a+":"+i+";"}),t}(i)),t.push(a+'="'+r(i).replace(/"/g,"&quot;")+'"')}),t.length?" "+t.join(" "):""}function r(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}),S=u(function(e,t){f();var a=g(),i=w(),r=T(),n=E(),s=x(),o="http://www.w3.org/1999/xhtml";function d(e,t,a){if(!m(this,d))return new d(e);var i=void 0===a?o:a||null;this.tagName=i===o?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=i,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=d,d.prototype.type="DOMElement",d.prototype.nodeType=1,d.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},d.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[a]=e,e.parentNode=this,t},d.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},d.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=null==t?-1:this.childNodes.indexOf(t);return a>-1?this.childNodes.splice(a,0,e):this.childNodes.push(e),e.parentNode=this,e},d.prototype.setAttributeNS=function(e,t,a){var i=null,r=t,n=t.indexOf(":");(n>-1&&(i=t.substr(0,n),r=t.substr(n+1)),"INPUT"===this.tagName&&"type"===t)?this.type=a:(this._attributes[e]||(this._attributes[e]={}))[r]={value:a,prefix:i}},d.prototype.getAttributeNS=function(e,t){var a=this._attributes[e],i=a&&a[t]&&a[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof i?null:i},d.prototype.removeAttributeNS=function(e,t){var a=this._attributes[e];a&&delete a[t]},d.prototype.hasAttributeNS=function(e,t){var a=this._attributes[e];return!!a&&t in a},d.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},d.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},d.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},d.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},d.prototype.removeEventListener=n,d.prototype.addEventListener=r,d.prototype.dispatchEvent=i,d.prototype.focus=function(){},d.prototype.toString=function(){return s(this)},d.prototype.getElementsByClassName=function(e){var t=e.split(" "),i=[];return a(this,function(e){if(1===e.nodeType){var a=(e.className||"").split(" ");t.every(function(e){return -1!==a.indexOf(e)})&&i.push(e)}}),i},d.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return a(this.childNodes,function(a){1===a.nodeType&&("*"===e||a.tagName.toLowerCase()===e)&&t.push(a)}),t},d.prototype.contains=function(e){return a(this,function(t){return e===t})||!1}}),R=u(function(e,t){f();var a=S();function i(e){if(!m(this,i))return new i;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=i,i.prototype.type="DocumentFragment",i.prototype.nodeType=11,i.prototype.nodeName="#document-fragment",i.prototype.appendChild=a.prototype.appendChild,i.prototype.replaceChild=a.prototype.replaceChild,i.prototype.removeChild=a.prototype.removeChild,i.prototype.toString=function(){return this.childNodes.map(function(e){return String(e)}).join("")}}),P=u(function(e,t){function a(e){}t.exports=a,a.prototype.initEvent=function(e,t,a){this.type=e,this.bubbles=t,this.cancelable=a},a.prototype.preventDefault=function(){}}),D=u(function(e,t){f();var a=g(),i=b(),r=k(),n=S(),s=R(),o=P(),d=w(),l=T(),u=E();function c(){if(!m(this,c))return new c;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=c;var h=c.prototype;h.createTextNode=function(e){return new r(e,this)},h.createElementNS=function(e,t){return new n(t,this,null===e?null:String(e))},h.createElement=function(e){return new n(e,this)},h.createDocumentFragment=function(){return new s(this)},h.createEvent=function(e){return new o(e)},h.createComment=function(e){return new i(e,this)},h.getElementById=function(e){return e=String(e),a(this.childNodes,function(t){if(String(t.id)===e)return t})||null},h.getElementsByClassName=n.prototype.getElementsByClassName,h.getElementsByTagName=n.prototype.getElementsByTagName,h.contains=n.prototype.contains,h.removeEventListener=u,h.addEventListener=l,h.dispatchEvent=d}),A=u(function(e,t){t.exports=new(D())}),O=u(function(e,t){var a,i="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},r=A();"undefined"!=typeof document?a=document:(a=i["__GLOBAL_DOCUMENT_CACHE@4"])||(a=i["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=a});function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}function C(e,t){if(e){if("string"==typeof e)return q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return q(e,t)}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,r,n=[],s=!0,o=!1;try{for(a=a.call(e);!(s=(i=a.next()).done)&&(n.push(i.value),!(t&&n.length===t));s=!0);}catch(e){o=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(o)throw r}}return n}}(e,t)||C(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=h(p()),N=h(p()),M=h(p()),j={now:function(){var e=M.default.performance,t=e&&e.timing,a=t&&t.navigationStart;return Math.round("number"==typeof a&&"function"==typeof e.now?a+e.now():Date.now())}},H=function(){if("function"==typeof(null==(e=N.default.crypto)?void 0:e.getRandomValues)){a=new Uint8Array(32),N.default.crypto.getRandomValues(a);for(var e,t,a,i=0;i<32;i++)a[i]=a[i]%16}else{a=[];for(var r=0;r<32;r++)a[r]=16*Math.random()|0}var n=0;t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t="x"===e?a[n]:3&a[n]|8;return n++,t.toString(16)});var s=j.now(),o=null==s?void 0:s.toString(16).substring(3);return o?t.substring(0,28)+o:t},B=function(){return("000000"+(0x81bf1000*Math.random()|0).toString(36)).slice(-6)},U=function(e){var t;if(e&&void 0!==e.nodeName)return e.muxId||(e.muxId=B()),e.muxId;try{t=document.querySelector(e)}catch(e){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},F=function(e){e&&void 0!==e.nodeName?e=U(t=e):t=document.querySelector(e);var t,a=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,a]};function G(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},W=function(e){var t,a,i,r,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=e?[console,e]:[console],d=(t=console.trace).bind.apply(t,G(o)),l=(a=console.info).bind.apply(a,G(o)),u=(i=console.debug).bind.apply(i,G(o)),c=(r=console.warn).bind.apply(r,G(o)),h=(n=console.error).bind.apply(n,G(o)),p=s;return{trace:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>V.TRACE))return d.apply(void 0,G(t))},debug:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>V.DEBUG))return u.apply(void 0,G(t))},info:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>V.INFO))return l.apply(void 0,G(t))},warn:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>V.WARN))return c.apply(void 0,G(t))},error:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>V.ERROR))return h.apply(void 0,G(t))},get level(){return p},set level(v){v!==this.level&&(p=null!=v?v:s)}}}("[mux]"),Q=h(p());function z(){return"1"===(Q.default.doNotTrack||Q.default.navigator&&Q.default.navigator.doNotTrack)}function J(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){if(!m(e,t))throw TypeError("Cannot call a class as a function")}function $(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Y(e,t,a){return t&&$(e.prototype,t),a&&$(e,a),e}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,a){return(ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(a||e):r.value}})(e,t,a||e)}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}f(),y();var ea=function(e){return ei(e)[0]},ei=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,a=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return a&&(t=(a.match(/[^\.]+\.[^\.]+$/)||[])[0]),[a,t]},er=h(p()),en={exists:function(){var e=er.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=er.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=er.default.performance,t=e&&e.timing;return t&&t.navigationStart}};function es(e,t,a){a=void 0===a?1:a,e[t]=e[t]||0,e[t]+=a}function eo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){X(e,t,a[t])})}return e}function ed(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);a.push.apply(a,i)}return a})(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}),e}var el=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],eu=["x-cdn","content-type"].concat(el);function ec(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach(function(e){if(e){var a=e.split(": "),i=a.shift();i&&(eu.indexOf(i.toLowerCase())>=0||0===i.toLowerCase().indexOf("x-litix-"))&&(t[i]=a.join(": "))}}),t}function eh(e){if(e){var t=el.find(function(t){return void 0!==e[t]});return t?e[t]:void 0}}var ep=function(e){var t={};for(var a in e){var i=e[a];-1!==i["DATA-ID"].search("io.litix.data.")&&(t[i["DATA-ID"].replace("io.litix.data.","")]=i.VALUE)}return t},em=function(e){if(!e)return{};var t=en.navigationStart(),a=e.loading,i=a?a.start:e.trequest,r=a?a.first:e.tfirst,n=a?a.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+i),responseStart:Math.round(t+r),responseEnd:Math.round(t+n)}},ev=function(e){if(!(!e||"function"!=typeof e.getAllResponseHeaders))return ec(e.getAllResponseHeaders())},ef=function(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=arguments.length>4?arguments[4]:void 0,r=e.log,n=e.utils.secondsToMs,s=function(e){var t,a=parseInt(i.version);return 1===a&&null!==e.programDateTime&&(t=e.programDateTime),0===a&&null!==e.pdt&&(t=e.pdt),t};if(!en.exists())return void r.warn("performance timing not supported. Not tracking HLS.js.");var o=function(a,i){return e.emit(t,a,i)},d=function(e,t){var a=t.levels,i=t.audioTracks,r=t.url,n=t.stats,s=t.networkDetails,d=t.sessionData,l={},u={};a.forEach(function(e,t){l[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),i.forEach(function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var c=em(n),h=c.bytesLoaded,p=c.requestStart,m=c.responseStart,f=c.responseEnd;o("requestcompleted",ed(eo({},ep(d)),{request_event_type:e,request_bytes_loaded:h,request_start:p,request_response_start:m,request_response_end:f,request_type:"manifest",request_hostname:ea(r),request_response_headers:ev(s),request_rendition_lists:{media:l,audio:u,video:{}}}))};a.on(i.Events.MANIFEST_LOADED,d);var l=function(e,t){var a=t.details,i=t.level,r=t.networkDetails,d=em(t.stats),l=d.bytesLoaded,u=d.requestStart,c=d.responseStart,h=d.responseEnd,p=a.fragments[a.fragments.length-1],m=s(p)+n(p.duration);o("requestcompleted",{request_event_type:e,request_bytes_loaded:l,request_start:u,request_response_start:c,request_response_end:h,request_current_level:i,request_type:"manifest",request_hostname:ea(a.url),request_response_headers:ev(r),video_holdback:a.holdBack&&n(a.holdBack),video_part_holdback:a.partHoldBack&&n(a.partHoldBack),video_part_target_duration:a.partTarget&&n(a.partTarget),video_target_duration:a.targetduration&&n(a.targetduration),video_source_is_live:a.live,player_manifest_newest_program_time:isNaN(m)?void 0:m})};a.on(i.Events.LEVEL_LOADED,l);var u=function(e,t){var a=t.details,i=t.networkDetails,r=em(t.stats);o("requestcompleted",{request_event_type:e,request_bytes_loaded:r.bytesLoaded,request_start:r.requestStart,request_response_start:r.responseStart,request_response_end:r.responseEnd,request_type:"manifest",request_hostname:ea(a.url),request_response_headers:ev(i)})};a.on(i.Events.AUDIO_TRACK_LOADED,u);var c=function(e,t){var i=t.stats,r=t.networkDetails,n=t.frag,s=em(i=i||n.stats),d=s.bytesLoaded,l=s.requestStart,u=s.responseStart,c=s.responseEnd,h=r?ev(r):void 0,p={request_event_type:e,request_bytes_loaded:d,request_start:l,request_response_start:u,request_response_end:c,request_hostname:r?ea(r.responseURL):void 0,request_id:h?eh(h):void 0,request_response_headers:h,request_media_duration:n.duration,request_url:null==r?void 0:r.responseURL};"main"===n.type?(p.request_type="media",p.request_current_level=n.level,p.request_video_width=(a.levels[n.level]||{}).width,p.request_video_height=(a.levels[n.level]||{}).height,p.request_labeled_bitrate=(a.levels[n.level]||{}).bitrate):p.request_type=n.type,o("requestcompleted",p)};a.on(i.Events.FRAG_LOADED,c);var h=function(e,t){var a=t.frag,i=a.start;o("fragmentchange",{currentFragmentPDT:s(a),currentFragmentStart:n(i)})};a.on(i.Events.FRAG_CHANGED,h);var p=function(e,t){var a,r=t.type,n=t.details,s=t.response,d=t.fatal,l=t.frag,u=t.networkDetails,c=(null==l?void 0:l.url)||t.url||"",h=u?ev(u):void 0;(n===i.ErrorDetails.MANIFEST_LOAD_ERROR||n===i.ErrorDetails.MANIFEST_LOAD_TIMEOUT||n===i.ErrorDetails.FRAG_LOAD_ERROR||n===i.ErrorDetails.FRAG_LOAD_TIMEOUT||n===i.ErrorDetails.LEVEL_LOAD_ERROR||n===i.ErrorDetails.LEVEL_LOAD_TIMEOUT||n===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||n===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||n===i.ErrorDetails.SUBTITLE_LOAD_ERROR||n===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||n===i.ErrorDetails.KEY_LOAD_ERROR||n===i.ErrorDetails.KEY_LOAD_TIMEOUT)&&o("requestfailed",{request_error:n,request_url:c,request_hostname:ea(c),request_id:h?eh(h):void 0,request_type:n===i.ErrorDetails.FRAG_LOAD_ERROR||n===i.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":n===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||n===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":n===i.ErrorDetails.SUBTITLE_LOAD_ERROR||n===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":n===i.ErrorDetails.KEY_LOAD_ERROR||n===i.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==s?void 0:s.code,request_error_text:null==s?void 0:s.text}),d&&o("error",{player_error_code:r,player_error_message:n,player_error_context:"".concat(c?"url: ".concat(c,"\n"):"")+"".concat(s&&(s.code||s.text)?"response: ".concat(s.code,", ").concat(s.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null==(a=t.err)?void 0:a.message,"\n"):"")})};a.on(i.Events.ERROR,p);var m=function(e,t){var a=t.frag,i=a&&a._url||"";o("requestcanceled",{request_event_type:e,request_url:i,request_type:"media",request_hostname:ea(i)})};a.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,m);var f=function(e,t){var i=t.level,n=a.levels[i];if(n&&n.attrs&&n.attrs.BANDWIDTH){var s,d=n.attrs.BANDWIDTH,l=parseFloat(n.attrs["FRAME-RATE"]);isNaN(l)||(s=l),d?o("renditionchange",{video_source_fps:s,video_source_bitrate:d,video_source_width:n.width,video_source_height:n.height,video_source_rendition_name:n.name,video_source_codec:null==n?void 0:n.videoCodec}):r.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};a.on(i.Events.LEVEL_SWITCHED,f),a._stopMuxMonitor=function(){a.off(i.Events.MANIFEST_LOADED,d),a.off(i.Events.LEVEL_LOADED,l),a.off(i.Events.AUDIO_TRACK_LOADED,u),a.off(i.Events.FRAG_LOADED,c),a.off(i.Events.FRAG_CHANGED,h),a.off(i.Events.ERROR,p),a.off(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,m),a.off(i.Events.LEVEL_SWITCHED,f),a.off(i.Events.DESTROYING,a._stopMuxMonitor),delete a._stopMuxMonitor},a.on(i.Events.DESTROYING,a._stopMuxMonitor)},e_=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()},ey=function(e,t){if(!e||!e.requestEndDate)return{};var a,i=ea(e.url),r=e.url,n=e.bytesLoaded,s=new Date(e.requestStartDate).getTime(),o=new Date(e.firstByteDate).getTime(),d=new Date(e.requestEndDate).getTime(),l=isNaN(e.duration)?0:e.duration,u="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);u.length>0&&(a=ec(u[u.length-1]._responseHeaders||""));var c=a?eh(a):void 0;return{requestStart:s,requestResponseStart:o,requestResponseEnd:d,requestBytesLoaded:n,requestResponseHeaders:a,requestMediaDuration:l,requestHostname:i,requestUrl:r,requestId:c}},eg=function(e,t){var a=t.getQualityFor(e),i=t.getCurrentTrackFor(e).bitrateList;return i?{currentLevel:a,renditionWidth:i[a].width||null,renditionHeight:i[a].height||null,renditionBitrate:i[a].bandwidth}:{}},eb=function(e){var t;return null==(t=e.match(/.*codecs\*?="(.*)"/))?void 0:t[1]},ek=function(e){try{var t,a;return null==(a=e.getVersion)||null==(t=a.call(e))?void 0:t.split(".").map(function(e){return parseInt(e)})[0]}catch(e){return!1}},ew=function(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=e.log;if(!a||!a.on)return void i.warn("Invalid dash.js player reference. Monitoring blocked.");var r=ek(a),n=function(a,i){return e.emit(t,a,i)},s=function(e){var t=e.type,a=(e.data||{}).url;n("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:ea(a),request_url:a})};a.on("manifestLoaded",s);var o={},d=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},l=function(e){var t=e.type,i=e.chunk,r=e.request,s=(i||{}).mediaInfo||{},d=s.type,l=s.bitrateList,u={};(l=l||[]).forEach(function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}}),"video"===d?o.video=u:"audio"===d?o.audio=u:o.media=u;var c=ey(r,a),h=c.requestStart,p=c.requestResponseStart,m=c.requestResponseEnd,f=c.requestResponseHeaders,_=c.requestMediaDuration,y=c.requestHostname,g=c.requestUrl;n("requestcompleted",{request_event_type:t,request_start:h,request_response_start:p,request_response_end:m,request_bytes_loaded:-1,request_type:d+"_init",request_response_headers:f,request_hostname:y,request_id:c.requestId,request_url:g,request_media_duration:_,request_rendition_lists:o})};r>=4?a.on("initFragmentLoaded",l):a.on("initFragmentLoaded",function(e){var t=e.type,a=e.fragmentModel,i=e.chunk;l({type:t,request:d(a),chunk:i})});var u=function(e){var t=e.type,i=e.chunk,r=e.request,s=i||{},o=s.mediaInfo,d=s.start,l=(o||{}).type,u=ey(r,a),c=u.requestStart,h=u.requestResponseStart,p=u.requestResponseEnd,m=u.requestBytesLoaded,f=u.requestResponseHeaders,_=u.requestMediaDuration,y=u.requestHostname,g=u.requestUrl,b=u.requestId,k=eg(l,a),w=k.currentLevel,T=k.renditionWidth,E=k.renditionHeight;n("requestcompleted",{request_event_type:t,request_start:c,request_response_start:h,request_response_end:p,request_bytes_loaded:m,request_type:l,request_response_headers:f,request_hostname:y,request_id:b,request_url:g,request_media_start_time:d,request_media_duration:_,request_current_level:w,request_labeled_bitrate:k.renditionBitrate,request_video_width:T,request_video_height:E})};r>=4?a.on("mediaFragmentLoaded",u):a.on("mediaFragmentLoaded",function(e){var t=e.type,a=e.fragmentModel,i=e.chunk;u({type:t,request:d(a),chunk:i})});var c={video:void 0,audio:void 0,totalBitrate:void 0},h=function(){if(c.video&&"number"==typeof c.video.bitrate){if(!(c.video.width&&c.video.height))return void i.warn("have bitrate info for video but missing width/height");var e=c.video.bitrate;if(c.audio&&"number"==typeof c.audio.bitrate&&(e+=c.audio.bitrate),e!==c.totalBitrate)return c.totalBitrate=e,{video_source_bitrate:e,video_source_height:c.video.height,video_source_width:c.video.width,video_source_codec:eb(c.video.codec)}}},p=function(e,t,r){if("number"!=typeof e.newQuality)return void i.warn("missing evt.newQuality in qualityChangeRendered event",e);var s=e.mediaType;if("audio"===s||"video"===s){var o=a.getBitrateInfoListFor(s).find(function(t){return t.qualityIndex===e.newQuality});if(!(o&&"number"==typeof o.bitrate))return void i.warn("missing bitrate info for ".concat(s));c[s]=ed(eo({},o),{codec:a.getCurrentTrackFor(s).codec});var d=h();d&&n("renditionchange",d)}};a.on("qualityChangeRendered",p);var m=function(e){var t=e.request,a=e.mediaType;n("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:a,request_hostname:ea(t.url)})};a.on("fragmentLoadingAbandoned",m);var f=function(e){var t,a,i=e.error,r=(null==i||null==(t=i.data)?void 0:t.request)||{},s=(null==i||null==(a=i.data)?void 0:a.response)||{};(null==i?void 0:i.code)===27&&n("requestfailed",{request_error:r.type+"_"+r.action,request_url:r.url,request_hostname:ea(r.url),request_type:r.mediaType,request_error_code:s.status,request_error_text:s.statusText});var o="".concat(null!=r&&r.url?"url: ".concat(r.url,"\n"):"")+"".concat(null!=s&&s.status||null!=s&&s.statusText?"response: ".concat(null==s?void 0:s.status,", ").concat(null==s?void 0:s.statusText,"\n"):"");n("error",{player_error_code:null==i?void 0:i.code,player_error_message:null==i?void 0:i.message,player_error_context:o})};a.on("error",f),a._stopMuxMonitor=function(){a.off("manifestLoaded",s),a.off("initFragmentLoaded",l),a.off("mediaFragmentLoaded",u),a.off("qualityChangeRendered",p),a.off("error",f),a.off("fragmentLoadingAbandoned",m),delete a._stopMuxMonitor}},eT=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()},eE=0,ex=function(){function e(){K(this,e),X(this,"_listeners",void 0)}return Y(e,[{key:"on",value:function(e,t,a){return t._eventEmitterGuid=t._eventEmitterGuid||++eE,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],a&&(t=t.bind(a)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var a=this._listeners&&this._listeners[e];a&&a.forEach(function(e,i){e._eventEmitterGuid===t._eventEmitterGuid&&a.splice(i,1)})}},{key:"one",value:function(e,t,a){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++eE;var r=function(){i.off(e,r),t.apply(a||this,arguments)};r._eventEmitterGuid=t._eventEmitterGuid,this.on(e,r)}},{key:"emit",value:function(e,t){var a=this;if(this._listeners){t=t||{};var i=this._listeners["before"+e]||[],r=this._listeners["before*"]||[],n=this._listeners[e]||[],s=this._listeners["after"+e]||[],o=function(t,i){(t=t.slice()).forEach(function(t){t.call(a,{type:e},i)})};o(i,t),o(r,t),o(n,t),o(s,t)}}}]),e}(),eS=h(p()),eR=function(){function e(t){var a=this;K(this,e),X(this,"_playbackHeartbeatInterval",void 0),X(this,"_playheadShouldBeProgressing",void 0),X(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",function(){a._playheadShouldBeProgressing=!0}),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",function(){t.data.player_is_paused?a._stopPlaybackHeartbeatInterval():a._startPlaybackHeartbeatInterval()}),t.on("timeupdate",function(){null!==a._playbackHeartbeatInterval&&t.emit("playbackheartbeat")}),t.on("devicesleep",function(e,i){null!==a._playbackHeartbeatInterval&&(eS.default.clearInterval(a._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),a._playbackHeartbeatInterval=null)})}return Y(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=eS.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(eS.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),eP=function e(t){var a=this;K(this,e),X(this,"viewErrored",void 0),t.on("viewinit",function(){a.viewErrored=!1}),t.on("error",function(e,i){try{var r=t.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});r&&(t.data.player_error_code=r.player_error_code||i.player_error_code,t.data.player_error_message=r.player_error_message||i.player_error_message,t.data.player_error_context=r.player_error_context||i.player_error_context,t.data.player_error_severity=r.player_error_severity||i.player_error_severity,t.data.player_error_business_exception=r.player_error_business_exception||i.player_error_business_exception,a.viewErrored=!0)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),a.viewErrored=!0}}),t.on("aftererror",function(){var e,a,i,r,n;null==(e=t.data)||delete e.player_error_code,null==(a=t.data)||delete a.player_error_message,null==(i=t.data)||delete i.player_error_context,null==(r=t.data)||delete r.player_error_severity,null==(n=t.data)||delete n.player_error_business_exception})},eD=function(){function e(t){K(this,e),X(this,"_watchTimeTrackerLastCheckedTime",void 0),X(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return Y(e,[{key:"_updateWatchTime",value:function(e,t){var a=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=a),es(this.pm.data,"view_watch_time",a-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=a}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),eA=function(){function e(t){var a=this;K(this,e),X(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),X(this,"_lastTime",void 0),X(this,"_isAdPlaying",void 0),X(this,"_callbackUpdatePlaybackTime",void 0),X(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=j.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var i=this._startPlaybackTimeTracking.bind(this);t.on("playing",i),t.on("adplaying",i),t.on("seeked",i);var r=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",r),t.on("seeking",r),t.on("adplaying",function(){a._isAdPlaying=!0}),t.on("adended",function(){a._isAdPlaying=!1}),t.on("adpause",function(){a._isAdPlaying=!1}),t.on("adbreakstart",function(){a._isAdPlaying=!1}),t.on("adbreakend",function(){a._isAdPlaying=!1}),t.on("adplay",function(){a._isAdPlaying=!1}),t.on("viewinit",function(){a._playbackTimeTrackerLastPlayheadPosition=-1,a._lastTime=j.now(),a._isAdPlaying=!1,a._callbackUpdatePlaybackTime=null})}return Y(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=j.now(),a=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?a=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(a=t-this._lastTime),a>0&&a<=1e3&&es(this.pm.data,"view_content_playback_time",a),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),eO=function(){function e(t){K(this,e),X(this,"pm",void 0),this.pm=t;var a=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",a),t.on("playbackheartbeatend",a),t.on("timeupdate",a),t.on("destroy",function(){t.off("timeupdate",a)})}return Y(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var a=this,i=function(){a.pm.currentFragmentPDT&&a.pm.currentFragmentStart&&(a.pm.data.player_program_time=a.pm.currentFragmentPDT+a.pm.data.player_playhead_time-a.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var r=this.pm.getPlayheadTime();void 0!==r&&(this.pm.data.player_playhead_time=r,i(),this._updateMaxPlayheadPosition())}}}]),e}(),eq=function e(t){if(K(this,e),!t.disableRebufferTracking){var a,i=function(e,t){r(t),a=void 0},r=function(e){if(a){var i=e.viewer_time-a;es(t.data,"view_rebuffer_duration",i),a=e.viewer_time,t.data.view_rebuffer_duration>3e5&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(3e5,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",function(e,t){return r(t)}),t.on("rebufferstart",function(e,r){a||(es(t.data,"view_rebuffer_count",1),a=r.viewer_time,t.one("rebufferend",i))}),t.on("viewinit",function(){a=void 0,t.off("rebufferend",i)})}},eC=function(){function e(t){var a=this;K(this,e),X(this,"_lastCheckedTime",void 0),X(this,"_lastPlayheadTime",void 0),X(this,"_lastPlayheadTimeUpdatedTime",void 0),X(this,"_rebuffering",void 0),X(this,"pm",void 0),this.pm=t,t.disableRebufferTracking||t.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",function(){a._cleanupRebufferTracker(null,{viewer_time:j.now()})}))}return Y(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)return void this._cleanupRebufferTracker(e,t);if(null===this._lastCheckedTime)return void this._prepareRebufferTrackerState(t.viewer_time);if(this._lastPlayheadTime!==this.pm.data.player_playhead_time)return void this._cleanupRebufferTracker(e,t,!0);var a=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&a>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&i>0&&r-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+r-i}))}a?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),eL=function(){function e(t){var a=this;K(this,e),X(this,"pm",void 0),this.pm=t,t.on("viewinit",function(){var e=t.data,i=e.view_id;if(!e.view_program_changed){var r=function(e,r){var n=r.viewer_time;"playing"===e.type&&void 0===t.data.view_time_to_first_frame?a.calculateTimeToFirstFrame(n||j.now(),i):"adplaying"===e.type&&(void 0===t.data.view_time_to_first_frame||a._inPrerollPosition())&&a.calculateTimeToFirstFrame(n||j.now(),i)};t.one("playing",r),t.one("adplaying",r),t.one("viewend",function(){t.off("playing",r),t.off("adplaying",r)})}})}return Y(e,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.pm.pageLoadInitTime&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.pm.pageLoadInitTime))}}]),e}(),eI=function e(t){var a=this;K(this,e),X(this,"_lastPlayerHeight",void 0),X(this,"_lastPlayerWidth",void 0),X(this,"_lastPlayheadPosition",void 0),X(this,"_lastSourceHeight",void 0),X(this,"_lastSourceWidth",void 0),t.on("viewinit",function(){a._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend"].forEach(function(e){t.on(e,function(){if(a._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&a._lastPlayerWidth>=0&&a._lastSourceWidth>0&&a._lastPlayerHeight>=0&&a._lastSourceHeight>0){var e=t.data.player_playhead_time-a._lastPlayheadPosition;if(e<0){a._lastPlayheadPosition=-1;return}var i=Math.min(a._lastPlayerWidth/a._lastSourceWidth,a._lastPlayerHeight/a._lastSourceHeight),r=Math.max(0,i-1),n=Math.max(0,1-i);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,r),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,n),es(t.data,"view_total_content_playback_time",e),es(t.data,"view_total_upscaling",r*e),es(t.data,"view_total_downscaling",n*e)}a._lastPlayheadPosition=-1})}),["playing","hb","renditionchange","orientationchange"].forEach(function(e){t.on(e,function(){a._lastPlayheadPosition=t.data.player_playhead_time,a._lastPlayerWidth=t.data.player_width,a._lastPlayerHeight=t.data.player_height,a._lastSourceWidth=t.data.video_source_width,a._lastSourceHeight=t.data.video_source_height})})},eN=function e(t){var a=this;K(this,e),X(this,"isSeeking",void 0),this.isSeeking=!1;var i=-1,r=function(){var e=j.now(),r=(t.data.viewer_time||e)-(i||e);es(t.data,"view_seek_duration",r),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,r),a.isSeeking=!1,i=-1};t.on("seeking",function(e,n){if(Object.assign(t.data,n),a.isSeeking&&n.viewer_time-i<=2e3){i=n.viewer_time;return}a.isSeeking&&r(),a.isSeeking=!0,i=n.viewer_time,es(t.data,"view_seek_count",1),t.send("seeking")}),t.on("seeked",function(){r()}),t.on("viewend",function(){a.isSeeking&&(r(),t.send("seeked")),a.isSeeking=!1,i=-1})},eM=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},ej=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],eH=function(){function e(t){var a=this;K(this,e),X(this,"_adHasPlayed",void 0),X(this,"_adRequests",void 0),X(this,"_adResponses",void 0),X(this,"_currentAdRequestNumber",void 0),X(this,"_currentAdResponseNumber",void 0),X(this,"_prerollPlayTime",void 0),X(this,"_wouldBeNewAdPlay",void 0),X(this,"isAdBreak",void 0),X(this,"pm",void 0),this.pm=t,t.on("viewinit",function(){a.isAdBreak=!1,a._currentAdRequestNumber=0,a._currentAdResponseNumber=0,a._adRequests=[],a._adResponses=[],a._adHasPlayed=!1,a._wouldBeNewAdPlay=!0,a._prerollPlayTime=void 0}),ej.forEach(function(e){return t.on(e,a._updateAdData.bind(a))});var i=function(){a.isAdBreak=!1};t.on("adbreakstart",function(){a.isAdBreak=!0}),t.on("play",i),t.on("playing",i),t.on("viewend",i),t.on("adrequest",function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdRequestNumber++},i),eM(a._adRequests,i),es(t.data,"view_ad_request_count"),a.inPrerollPosition()&&(t.data.view_preroll_requested=!0,a._adHasPlayed||es(t.data,"view_preroll_request_count"))}),t.on("adresponse",function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdResponseNumber++},i),eM(a._adResponses,i);var r=a.findAdRequest(i.ad_request_id);r&&es(t.data,"view_ad_request_time",Math.max(0,i.viewer_time-r.viewer_time))}),t.on("adplay",function(e,i){a._adHasPlayed=!0,a._wouldBeNewAdPlay&&(a._wouldBeNewAdPlay=!1,es(t.data,"view_ad_played_count")),a.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,a._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,i.viewer_time-a._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,i.viewer_time-t.data.view_start)),a._prerollPlayTime=i.viewer_time)}),t.on("adplaying",function(e,i){a.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==a._prerollPlayTime&&(t.data.view_preroll_load_time=i.viewer_time-a._prerollPlayTime,t.data.view_startup_preroll_load_time=i.viewer_time-a._prerollPlayTime)}),t.on("adclicked",function(e,i){a._wouldBeNewAdPlay||es(t.data,"view_ad_clicked_count")}),t.on("adskipped",function(e,i){a._wouldBeNewAdPlay||es(t.data,"view_ad_skipped_count")}),t.on("adended",function(){a._wouldBeNewAdPlay=!0}),t.on("aderror",function(){a._wouldBeNewAdPlay=!0})}return Y(e,[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var a=L(ei(t.ad_tag_url),2),i=a[0],r=a[1];this.pm.data.view_preroll_ad_tag_domain=r,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var n=L(ei(t.ad_asset_url),2),s=n[0],o=n[1];this.pm.data.view_preroll_ad_asset_domain=o,this.pm.data.view_preroll_ad_asset_hostname=s}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),eB=h(p()),eU=function e(t){K(this,e);var a,i,r=function(){t.disableRebufferTracking||(es(t.data,"view_waiting_rebuffer_count",1),a=j.now(),i=eB.default.setInterval(function(){if(a){var e=j.now();es(t.data,"view_waiting_rebuffer_duration",e-a),a=e}},250))},n=function(){t.disableRebufferTracking||a&&(es(t.data,"view_waiting_rebuffer_duration",j.now()-a),a=!1,eB.default.clearInterval(i))},s=!1,o=function(){s=!0},d=function(){s=!1,n()};t.on("waiting",function(){s&&r()}),t.on("playing",function(){n(),o()}),t.on("pause",d),t.on("seeking",d)},eF=function e(t){var a=this;K(this,e),X(this,"lastWallClockTime",void 0);var i=function(){a.lastWallClockTime=j.now(),t.on("before*",r)},r=function(e){var i=j.now(),r=a.lastWallClockTime;a.lastWallClockTime=i,i-r>3e4&&(t.emit("devicesleep",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicewake"))};t.one("playbackheartbeat",i),t.on("playbackheartbeatend",function(){t.off("before*",r),t.one("playbackheartbeat",i)})},eG=h(p()),eV=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var i in a)t[i]=a[i]}return t};return function t(a){function i(t,r,n){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(n=e({path:"/"},i.defaults,n)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*n.expires),n.expires=o}try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(e){}return r=a.write?a.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=t+"="+r+(n.expires?"; expires="+n.expires.toUTCString():"")+(n.path?"; path="+n.path:"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")}t||(s={});for(var d=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,u=0;u<d.length;u++){var c=d[u].split("="),h=c.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var p=c[0].replace(l,decodeURIComponent);if(h=a.read?a.read(h,p):a(h,p)||h.replace(l,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===p){s=h;break}t||(s[p]=h)}catch(e){}}return s}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,a){i(t,"",e(a,{expires:-1}))},i.withConverter=t,i}(function(){})}(),eW="muxData",eQ=function(){var e;try{e=(eV.get(eW)||"").split("&").reduce(function(e,t){var a=L(t.split("="),2),i=a[0],r=a[1],n=+r;return e[i]=r&&n==r?n:r,e},{})}catch(t){e={}}return e},ez=function(e){try{eV.set(eW,Object.entries(e).map(function(e){var t=L(e,2),a=t[0],i=t[1];return"".concat(a,"=").concat(i)}).join("&"),{expires:365})}catch(e){}},eJ=function(){var e=eQ();return e.mux_viewer_id=e.mux_viewer_id||H(),e.msn=e.msn||Math.random(),ez(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},eK=function(){var e=eQ(),t=j.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=H(),e.sst=t),e.sex=t+15e5,ez(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}},e$=h(p()),eY=function(){var e;switch(eX()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},eX=function(){var e=e$.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};eY.getConnectionFromAPI=eX;var eZ=e1({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),e0=e1({ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cm:"cmcd",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",pv:"previous",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function e1(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}function e2(e){var t={},a={};return Object.keys(e).forEach(function(i){var r=!1;if(e.hasOwnProperty(i)&&void 0!==e[i]){var n=i.split("_"),s=n[0],o=eZ[s];o||(W.info("Data key word `"+n[0]+"` not expected in "+i),o=s+"_"),n.splice(1).forEach(function(e){"url"===e&&(r=!0),e0[e]?o+=e0[e]:Number.isInteger(Number(e))?o+=e:(W.info("Data key word `"+e+"` not expected in "+i),o+="_"+e+"_")}),r?a[o]=e[i]:t[o]=e[i]}}),Object.assign(t,a)}var e3=h(p()),e5=h(O()),e4={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},e6=["hb","requestcompleted","requestfailed","requestcanceled"],e8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},e4,t)};e8.prototype.queueEvent=function(e,t){var a=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(a),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},e8.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&1===this._eventQueue.length)return void this._eventQueue.pop();this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()},e8.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),e3.default.clearTimeout(this._sendTimeout)},e8.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],e2({mux_view_message:"event queue truncated"}));var a=this._createPayload(t);e7(this._beaconUrl,a,!0,function(){})},e8.prototype._sendBeaconQueue=function(){var e=this;if(this._postInFlight){this._resendAfterPost=!0;return}var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var a=this._createPayload(t),i=j.now();e7(this._beaconUrl,a,!1,function(a,r){r?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,W.info("Error sending beacon: "+r)):e._failureCount=0,e._roundTripTime=j.now()-i,e._postInFlight=!1,e._resendAfterPost&&(e._resendAfterPost=!1,e._eventQueue.length>0&&e._sendBeaconQueue())})},e8.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},e8.prototype._startBeaconSending=function(){var e=this;e3.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=e3.default.setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},e8.prototype._createPayload=function(e){var t=this,a={transmission_timestamp:Math.round(j.now())};this._roundTripTime&&(a.rtt_ms=Math.round(this._roundTripTime));var i,r,n,s=function(){n=(i=JSON.stringify({metadata:a,events:r||e})).length/1024},o=function(){return n<=t._options.maxPayloadKBSize};return s(),o()||(W.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),r=e.filter(function(e){return -1===e6.indexOf(e.e)}),s()),o()||(W.info("Payload size still too big ("+n+" kb). Cropping fields.."),r.forEach(function(e){for(var t in e){var a=e[t];"string"==typeof a&&a.length>51200&&(e[t]=a.substring(0,51200))}}),s()),i};var e9="function"==typeof e5.default.exitPictureInPicture?function(e){return e.length<=57344}:function(e){return!1},e7=function(e,t,a,i){if(a&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))return void i();if(e3.default.fetch)return void e3.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:e9(t)}).then(function(e){return i(null,e.ok?null:"Error")}).catch(function(e){return i(null,e)});if(e3.default.XMLHttpRequest){var r=new e3.default.XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)return i(null,200!==r.status?"error":void 0)},r.open("POST",e),r.setRequestHeader("Content-Type","text/plain"),r.send(t);return}i()},te=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],tt=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],ta=["ad_id","ad_creative_id","ad_universal_id"],ti=["viewstart","error","ended","viewend"],tr=function(){function e(t,a){var i,r,n,s,o,d,l,u,c,h,p,m,f,_,y,g,b,k,w,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};K(this,e),X(this,"mux",void 0),X(this,"envKey",void 0),X(this,"options",void 0),X(this,"eventQueue",void 0),X(this,"sampleRate",void 0),X(this,"disableCookies",void 0),X(this,"respectDoNotTrack",void 0),X(this,"previousBeaconData",void 0),X(this,"lastEventTime",void 0),X(this,"rateLimited",void 0),X(this,"pageLevelData",void 0),X(this,"viewerData",void 0),this.mux=t,this.envKey=a,this.options=T,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new e8((i=this.envKey,n=(r=this.options).beaconCollectionDomain,s=r.beaconDomain,n?"https://"+n:(i=i||"inferred").match(/^[a-z0-9]+$/)?"https://"+i+"."+(s||"litix.io"):"https://img.litix.io/a.gif")),this.sampleRate=null!=(b=this.options.sampleRate)?b:1,this.disableCookies=null!=(k=this.options.disableCookies)&&k,this.respectDoNotTrack=null!=(w=this.options.respectDoNotTrack)&&w,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null==(o=this.options.platform)?void 0:o.name,viewer_application_version:null==(d=this.options.platform)?void 0:d.version,viewer_application_engine:null==(l=this.options.platform)?void 0:l.layout,viewer_device_name:null==(u=this.options.platform)?void 0:u.product,viewer_device_category:"",viewer_device_manufacturer:null==(c=this.options.platform)?void 0:c.manufacturer,viewer_os_family:null==(p=this.options.platform)||null==(h=p.os)?void 0:h.family,viewer_os_architecture:null==(f=this.options.platform)||null==(m=f.os)?void 0:m.architecture,viewer_os_version:null==(y=this.options.platform)||null==(_=y.os)?void 0:_.version,viewer_connection_type:eY(),page_url:null===eG.default||void 0===eG.default||null==(g=eG.default.location)?void 0:g.href},this.viewerData=this.disableCookies?{}:eJ()}return Y(e,[{key:"send",value:function(e,t){if(!(!e||!(null!=t&&t.view_id))){if(this.respectDoNotTrack&&z())return W.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return W.error("A data object was expected in send() but was not provided");var a=this.disableCookies?{}:eK(),i=ed(eo({},this.pageLevelData,t,a,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var r,n=(null!=(r=i.mux_sample_number)?r:0)>=this.sampleRate,s=e2(this._deduplicateBeaconData(e,i));if(this.lastEventTime=this.mux.utils.now(),n)return W.info("Not sending event due to sample rate restriction",e,i,s);if(this.envKey||W.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,s),!this.rateLimited){if(W.info("Sending event",e,i,s),this.rateLimited=!this.eventQueue.queueEvent(e,s),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):ti.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return i.event="eventrateexceeded",s=e2(i),this.eventQueue.queueEvent(i.event,s),W.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var a=this,i={},r=t.view_id;if("-1"===r||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)i=eo({},t),r&&(this.previousBeaconData=i),r&&"viewend"===e&&(this.previousBeaconData=null);else{var n=0===e.indexOf("request");Object.entries(t).forEach(function(t){var r=L(t,2),s=r[0],o=r[1];a.previousBeaconData&&(o!==a.previousBeaconData[s]||te.indexOf(s)>-1||a.objectHasChanged(n,s,o,a.previousBeaconData[s])||a.eventRequiresKey(e,s))&&(i[s]=o,a.previousBeaconData[s]=o)})}return i}},{key:"objectHasChanged",value:function(e,t,a,i){return!!e&&0===t.indexOf("request_")&&("request_response_headers"===t||"object"!=typeof a||"object"!=typeof i||Object.keys(a||{}).length!==Object.keys(i||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||ta.includes(t)&&tt.includes(e))}}]),e}(),tn=function e(t){K(this,e);var a=0,i=0,r=0,n=0,s=0,o=0,d=0;t.on("requestcompleted",function(e,o){var d,l,u=o.request_start,c=o.request_response_start,h=o.request_response_end,p=o.request_bytes_loaded;if(n++,c?(d=c-(null!=u?u:0),l=(null!=h?h:0)-c):l=(null!=h?h:0)-(null!=u?u:0),l>0&&p&&p>0){var m=p/l*8e3;s++,i+=p,r+=l,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,m),t.data.view_average_request_throughput=i/r*8e3,t.data.view_request_count=n,d>0&&(a+=d,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,d),t.data.view_average_request_latency=a/s)}}),t.on("requestfailed",function(e,a){n++,o++,t.data.view_request_count=n,t.data.view_request_failed_count=o}),t.on("requestcanceled",function(e,a){n++,d++,t.data.view_request_count=n,t.data.view_request_canceled_count=d})},ts=function e(t){var a=this;K(this,e),X(this,"_lastEventTime",void 0),t.on("before*",function(e,i){var r=i.viewer_time,n=j.now(),s=a._lastEventTime;if(a._lastEventTime=n,s&&n-s>36e5){var o=Object.keys(t.data).reduce(function(e,a){return 0===a.indexOf("video_")?Object.assign(e,X({},a,t.data[a])):e},{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var d=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:r},o)),t.playbackHeartbeat._playheadShouldBeProgressing=d,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:r}),"playing"!==e.type&&t.emit("playing",{viewer_time:r}))}})};function to(e,t){return(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())}var td,tl=function e(t){K(this,e);var a=function(e){var a,i,r,o=null!=(a=e)&&a.request_type&&("media"===a.request_type||"video"===a.request_type)&&null!=(i=a.request_response_headers)&&i["x-cdn"]?a.request_response_headers["x-cdn"]:null!=a&&a.video_cdn?a.video_cdn:null,d=null!=(r=e)&&r.request_start?r.request_start:null!=r&&r.viewer_time?r.viewer_time:Date.now();null!=o&&!to(o,n)&&s<=d&&(n=o,s=d,t.emit("cdnchange",{video_cdn:o}))},i=null,r=null,n=null,s=0;t.on("viewinit",function(){i=null,r=null,n=null,s=0}),t.on("beforecdnchange",function(e,t){var a=null==t?void 0:t.video_cdn;a&&(void 0===t.video_previous_cdn||null===t.video_previous_cdn)&&(to(a,r)?t.video_previous_cdn=null!=i?i:void 0:(t.video_previous_cdn=null!=r?r:void 0,i=r,r=a))}),t.on("requestcompleted",function(e,t){a(t)})},tu=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange","cdnchange"],tc=new Set(["requestcompleted","requestfailed","requestcanceled"]),th=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e&&et(i,e);var t,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,a=Z(i);return e=t?Reflect.construct(a,arguments,Z(this).constructor):a.apply(this,arguments),e&&("object"===_(e)||"function"==typeof e)?e:J(this)});function i(e,t,r){K(this,i),X(J(n=a.call(this)),"pageLoadEndTime",void 0),X(J(n),"pageLoadInitTime",void 0),X(J(n),"_destroyed",void 0),X(J(n),"_heartBeatTimeout",void 0),X(J(n),"adTracker",void 0),X(J(n),"dashjs",void 0),X(J(n),"data",void 0),X(J(n),"disablePlayheadRebufferTracking",void 0),X(J(n),"disableRebufferTracking",void 0),X(J(n),"errorTracker",void 0),X(J(n),"errorTranslator",void 0),X(J(n),"emitTranslator",void 0),X(J(n),"getAdData",void 0),X(J(n),"getPlayheadTime",void 0),X(J(n),"getStateData",void 0),X(J(n),"stateDataTranslator",void 0),X(J(n),"hlsjs",void 0),X(J(n),"id",void 0),X(J(n),"longResumeTracker",void 0),X(J(n),"minimumRebufferDuration",void 0),X(J(n),"mux",void 0),X(J(n),"playbackEventDispatcher",void 0),X(J(n),"playbackHeartbeat",void 0),X(J(n),"playbackHeartbeatTime",void 0),X(J(n),"playheadTime",void 0),X(J(n),"seekingTracker",void 0),X(J(n),"sustainedRebufferThreshold",void 0),X(J(n),"watchTimeTracker",void 0),X(J(n),"currentFragmentPDT",void 0),X(J(n),"currentFragmentStart",void 0),n.pageLoadInitTime=en.navigationStart(),n.pageLoadEndTime=en.domContentLoadedEventEnd(),n.mux=e,n.id=t,null!=r&&r.beaconDomain&&n.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(r=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e},emitTranslator:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t},stateDataTranslator:function(e){return e}},r)).data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),W.level=r.debug?V.DEBUG:V.WARN,n.getPlayheadTime=r.getPlayheadTime,n.getStateData=r.getStateData||function(){return{}},n.getAdData=r.getAdData||function(){},n.minimumRebufferDuration=r.minimumRebufferDuration,n.sustainedRebufferThreshold=r.sustainedRebufferThreshold,n.playbackHeartbeatTime=r.playbackHeartbeatTime,n.disableRebufferTracking=r.disableRebufferTracking,n.disableRebufferTracking&&n.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),n.disablePlayheadRebufferTracking=r.disablePlayheadRebufferTracking,n.errorTranslator=r.errorTranslator,n.emitTranslator=r.emitTranslator,n.stateDataTranslator=r.stateDataTranslator,n.playbackEventDispatcher=new tr(e,r.data.env_key,r),n.data={player_instance_id:H(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconCollectionDomain||r.beaconDomain},n.data.view_sequence_number=1,n.data.player_sequence_number=1;var n,s=(function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(J(n));if(n.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)}),n.on("videochange",function(e,t){this._resetView(t)}),n.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")}),n.on("fragmentchange",function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart}),n.on("destroy",n.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var o=function(){var e=void 0!==n.data.view_start;n.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&n.mux.WINDOW_HIDDEN&&(n.data.player_is_paused||n.emit("hb"))};window.addEventListener("visibilitychange",o,!1);var d=function(e){e.persisted||n.destroy()};window.addEventListener("pagehide",d,!1),n.on("destroy",function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("pagehide",d)})}return n.on("playerready",function(e,t){Object.assign(this.data,t)}),tu.forEach(function(e){n.on(e,function(t,a){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,a),this._sanitizeData()}),n.on("after"+e,function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)})}),n.on("viewend",function(e,t){Object.assign(n.data,t)}),n.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),this.pageLoadInitTime=this.data.page_load_init_time||this.pageLoadInitTime,this.pageLoadEndTime=this.data.page_load_end_time||this.pageLoadEndTime,!this.mux.PLAYER_TRACKED&&this.pageLoadInitTime&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.pageLoadEndTime)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.pageLoadEndTime||1/0)-this.pageLoadInitTime)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),n.longResumeTracker=new ts(J(n)),n.errorTracker=new eP(J(n)),new eF(J(n)),n.seekingTracker=new eN(J(n)),n.playheadTime=new eO(J(n)),n.playbackHeartbeat=new eR(J(n)),new eI(J(n)),n.watchTimeTracker=new eD(J(n)),new eA(J(n)),n.adTracker=new eH(J(n)),new eC(J(n)),new eq(J(n)),new eL(J(n)),new eU(J(n)),new tn(J(n)),new tl(J(n)),r.hlsjs&&n.addHLSJS(r),r.dashjs&&n.addDashJS(r),n.emit("viewinit",r.data),n}return Y(i,[{key:"emit",value:function(e,t){var a,r=Object.assign({viewer_time:this.mux.utils.now()},t),n=[e,r];if(this.emitTranslator)try{n=this.emitTranslator(e,r)}catch(e){this.mux.log.warn("Exception in emit translator callback.",e)}null!=n&&n.length&&(a=ee(Z(i.prototype),"emit",this)).call.apply(a,[this].concat(G(n)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach(function(e){t[e]=void 0}),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var a=L(ei(t.video_source_url),2),i=a[0];t.video_source_domain=a[1],t.video_source_hostname=i}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,tc.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){var e,t=this.getStateData();if("function"==typeof this.stateDataTranslator)try{t=this.stateDataTranslator(t)}catch(e){this.mux.log.warn("Exception in stateDataTranslator translator callback.",e)}null!=(e=this.data)&&e.video_cdn&&null!=t&&t.video_cdn&&(t.video_cdn,t=function(e,t){if(null==e)return{};var a,i,r=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(t,["video_cdn"])),Object.assign(this.data,t),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var a=parseInt(e.data[t],10);e.data[t]=isNaN(a)?void 0:a}),["player_source_url","video_source_url"].forEach(function(t){if(e.data[t]){var a=e.data[t].toLowerCase();(0===a.indexOf("data:")||0===a.indexOf("blob:"))&&(e.data[t]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("video_")&&delete e.data[t]})}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=H(),a=function(){t===e.data.view_id&&es(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",a):a()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4)}},{key:"addHLSJS",value:function(e){return e.hlsjs?this.hlsjs?void this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):void(this.hlsjs=e.hlsjs,ef(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):void this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(e_(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){return e.dashjs?this.dashjs?void this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):void(this.dashjs=e.dashjs,ew(this.mux,this.id,e.dashjs)):void this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(eT(this.dashjs),this.dashjs=void 0)}}]),i}(ex),tp=h(O()),tm=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],tv={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},tf=h(p());tf.default&&tf.default.WeakMap&&(td=new WeakMap);var t_={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},ty=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};ty.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},ty.prototype.processLine=function(e){var t=e.indexOf(":"),a=tx(e,t),i=a[0],r=2===a.length?tk(a[1]):void 0;if("#"!==i[0])this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),!this.manifest.targetDuration||"duration"in this.currentUri||(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case t_.TARGET_DURATION:if(!isFinite(r)||r<0)return;this.manifest.targetDuration=r,this.setHoldBack();break;case t_.PART_INF:tg(this.manifest,a),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case t_.SERVER_CONTROL:tg(this.manifest,a),this.setHoldBack();break;case t_.INF:0===r?this.currentUri.duration=.01:r>0&&(this.currentUri.duration=r);break;case t_.PROGRAM_DATE_TIME:var n=new Date(r);this.manifest.dateTimeString||(this.manifest.dateTimeString=r,this.manifest.dateTimeObject=n),this.currentUri.dateTimeString=r,this.currentUri.dateTimeObject=n;break;case t_.VERSION:tg(this.manifest,a);break;case t_.SESSION_DATA:var s=ep(tS(a[1]));Object.assign(this.manifest.sessionData,s)}},ty.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,a=e.targetDuration,i=e.partTargetDuration;if(t){var r="holdBack",n="partHoldBack",s=a&&3*a,o=i&&2*i;a&&!t.hasOwnProperty(r)&&(t[r]=s),s&&t[r]<s&&(t[r]=s),i&&!t.hasOwnProperty(n)&&(t[n]=3*i),i&&t[n]<o&&(t[n]=o)}};var tg=function(e,t){var a,i=tb(t[0].replace("#EXT-X-",""));tE(t[1])?(a={},a=Object.assign(tT(t[1]),a)):a=tk(t[1]),e[i]=a},tb=function(e){return e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},tk=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},tw=function(e){var t={},a=e.split("=");return a.length>1&&(t[tb(a[0])]=tk(a[1])),t},tT=function(e){for(var t=e.split(","),a={},i=0;t.length>i;i++)a=Object.assign(tw(t[i]),a);return a},tE=function(e){return e.indexOf("=")>-1},tx=function(e,t){return -1===t?[e]:[e.substring(0,t),e.substring(t+1)]},tS=function(e){var t={};if(e){var a=e.search(",");return[e.slice(0,a),e.slice(a+1)].forEach(function(e,a){for(var i=e.replace(/['"]+/g,"").split("="),r=0;r<i.length;r++)"DATA-ID"===i[r]&&(t["DATA-ID"]=i[1-r]),"VALUE"===i[r]&&(t.VALUE=i[1-r])}),{data:t}}},tR={safeCall:function(e,t,a,i){var r=i;if(e&&"function"==typeof e[t])try{r=e[t].apply(e,a)}catch(e){W.info("safeCall error",e)}return r},safeIncrement:es,getComputedStyle:function(e,t){var a;return e&&t&&tf.default&&"function"==typeof tf.default.getComputedStyle?(td&&td.has(e)&&(a=td.get(e)),a||(a=tf.default.getComputedStyle(e,null),td&&td.set(e,a)),a.getPropertyValue(t)):""},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:ec,cdnHeadersToRequestId:eh,extractHostnameAndDomain:ei,extractHostname:ea,manifestParser:ty,generateShortID:B,generateUUID:H,now:j.now,findMediaElement:F},tP={},tD=function(e){var t=arguments;"string"==typeof e?tD.hasOwnProperty(e)?I.default.setTimeout(function(){t=Array.prototype.splice.call(t,1),tD[e].apply(null,t)},0):W.warn("`"+e+"` is an unknown task"):"function"==typeof e?I.default.setTimeout(function(){e(tD)},0):W.warn("`"+e+"` is invalid.")},tA={loaded:j.now(),NAME:"mux-embed",VERSION:"5.11.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,a){var i=L(F(t),3),r=i[0],n=i[1],s=i[2],o=e.log,d=e.utils.getComputedStyle,l=e.utils.secondsToMs;if(!r)return o.error("No element was found with the `"+n+"` query selector.");if("video"!==s&&"audio"!==s)return o.error("The element of `"+n+"` was not a media element.");r.mux&&(r.mux.destroy(),delete r.mux,o.warn("Already monitoring this video element, replacing existing event listeners")),(a=Object.assign({automaticErrorTracking:!0},a,{getPlayheadTime:function(){return l(r.currentTime)},getStateData:function(){var e,t,a=(null==(e=this.getPlayheadTime)?void 0:e.call(this))||l(r.currentTime),i=this.hlsjs&&this.hlsjs.url,n=this.dashjs&&"function"==typeof this.dashjs.getSource&&this.dashjs.getSource(),s={player_is_paused:r.paused,player_width:parseInt(d(r,"width")),player_height:parseInt(d(r,"height")),player_autoplay_on:r.autoplay,player_preload_on:r.preload,player_language_code:r.lang,player_is_fullscreen:tp.default&&!!(tp.default.fullscreenElement||tp.default.webkitFullscreenElement||tp.default.mozFullScreenElement||tp.default.msFullscreenElement),video_poster_url:r.poster,video_source_url:i||n||r.currentSrc,video_source_duration:l(r.duration),video_source_height:r.videoHeight,video_source_width:r.videoWidth,view_dropped_frame_count:null==r||null==(t=r.getVideoPlaybackQuality)?void 0:t.call(r).droppedVideoFrames};if(r.getStartDate&&a>0){var o=r.getStartDate();if(o&&"function"==typeof o.getTime&&o.getTime()){var u=o.getTime();s.player_program_time=u+a,r.seekable.length>0&&(s.player_live_edge_program_time=u+r.seekable.end(r.seekable.length-1))}}return s}})).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},a.data),r.mux=r.mux||{},r.mux.deleted=!1,r.mux.emit=function(t,a){e.emit(n,t,a)},r.mux.updateData=function(e){r.mux.emit("hb",e)};var u=function(){o.error("The monitor for this video element has already been destroyed.")};r.mux.destroy=function(){Object.keys(r.mux.listeners).forEach(function(e){r.removeEventListener(e,r.mux.listeners[e],!1)}),delete r.mux.listeners,r.mux.destroy=u,r.mux.swapElement=u,r.mux.emit=u,r.mux.addHLSJS=u,r.mux.addDashJS=u,r.mux.removeHLSJS=u,r.mux.removeDashJS=u,r.mux.updateData=u,r.mux.setEmitTranslator=u,r.mux.setStateDataTranslator=u,r.mux.setGetPlayheadTime=u,r.mux.deleted=!0,e.emit(n,"destroy")},r.mux.swapElement=function(t){var a=L(F(t),3),i=a[0],n=a[1],s=a[2];return i?"video"!==s&&"audio"!==s?e.log.error("The element of `"+n+"` was not a media element."):void(i.muxId=r.muxId,delete r.muxId,i.mux=i.mux||{},i.mux.listeners=Object.assign({},r.mux.listeners),delete r.mux.listeners,Object.keys(i.mux.listeners).forEach(function(e){r.removeEventListener(e,i.mux.listeners[e],!1),i.addEventListener(e,i.mux.listeners[e],!1)}),i.mux.swapElement=r.mux.swapElement,i.mux.destroy=r.mux.destroy,delete r.mux,r=i):e.log.error("No element was found with the `"+n+"` query selector.")},r.mux.addHLSJS=function(t){e.addHLSJS(n,t)},r.mux.addDashJS=function(t){e.addDashJS(n,t)},r.mux.removeHLSJS=function(){e.removeHLSJS(n)},r.mux.removeDashJS=function(){e.removeDashJS(n)},r.mux.setEmitTranslator=function(t){e.setEmitTranslator(n,t)},r.mux.setStateDataTranslator=function(t){e.setStateDataTranslator(n,t)},r.mux.setGetPlayheadTime=function(t){t||(t=a.getPlayheadTime),e.setGetPlayheadTime(n,t)},e.init(n,a),e.emit(n,"playerready"),r.paused||(e.emit(n,"play"),r.readyState>2&&e.emit(n,"playing")),r.mux.listeners={},tm.forEach(function(t){("error"!==t||a.automaticErrorTracking)&&(r.mux.listeners[t]=function(){var a={};if("error"===t){if(!r.error||1===r.error.code)return;a.player_error_code=r.error.code,a.player_error_message=tv[r.error.code]||r.error.message}e.emit(n,t,a)},r.addEventListener(t,r.mux.listeners[t],!1))})}(tD,e,t)},destroyMonitor:function(e){var t=L(F(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():W.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var a=U(e);tP[a]?tP[a].addHLSJS(t):W.error("A monitor for `"+a+"` has not been initialized.")},addDashJS:function(e,t){var a=U(e);tP[a]?tP[a].addDashJS(t):W.error("A monitor for `"+a+"` has not been initialized.")},removeHLSJS:function(e){var t=U(e);tP[t]?tP[t].removeHLSJS():W.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=U(e);tP[t]?tP[t].removeDashJS():W.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){z()&&t&&t.respectDoNotTrack&&W.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var a=U(e);tP[a]=new th(tD,a,t)},emit:function(e,t,a){var i=U(e);tP[i]?(tP[i].emit(t,a),"destroy"===t&&delete tP[i]):W.error("A monitor for `"+i+"` has not been initialized.")},updateData:function(e,t){var a=U(e);tP[a]?tP[a].emit("hb",t):W.error("A monitor for `"+a+"` has not been initialized.")},setEmitTranslator:function(e,t){var a=U(e);tP[a]?tP[a].emitTranslator=t:W.error("A monitor for `"+a+"` has not been initialized.")},setStateDataTranslator:function(e,t){var a=U(e);tP[a]?tP[a].stateDataTranslator=t:W.error("A monitor for `"+a+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var a=U(e);tP[a]?tP[a].getPlayheadTime=t:W.error("A monitor for `"+a+"` has not been initialized.")},checkDoNotTrack:z,log:W,utils:tR,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(tD,tA),void 0!==I.default&&"function"==typeof I.default.addEventListener&&I.default.addEventListener("pagehide",function(e){e.persisted||(tD.WINDOW_UNLOADING=!0)},!1);var tO=tD},89595:(e,t,a)=>{a.d(t,{lB:()=>l});let i=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],r=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function n(e){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${d(e)}></audio>
    </slot>
    <slot></slot>
  `}function s(e){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${d(e)}></video>
    </slot>
    <slot></slot>
  `}function o(e,{tag:t,is:a}){let o=globalThis.document?.createElement?.(t,{is:a}),d=o?function(e){let t=[];for(let a=Object.getPrototypeOf(e);a&&a!==HTMLElement.prototype;a=Object.getPrototypeOf(a)){let e=Object.getOwnPropertyNames(a);t.push(...e)}return t}(o):[];return class l extends e{static getTemplateHTML=t.endsWith("audio")?n:s;static shadowRootOptions={mode:"open"};static Events=i;static #D=!1;static get observedAttributes(){return l.#A(),[...o?.constructor?.observedAttributes??[],...r]}static #A(){if(this.#D)return;this.#D=!0;let e=new Set(this.observedAttributes);for(let t of(e.delete("muted"),d))if(!(t in this.prototype))if("function"==typeof o[t])this.prototype[t]=function(...e){return this.#f(),(()=>{if(this.call)return this.call(t,...e);let a=this.nativeEl?.[t];return a?.apply(this.nativeEl,e)})()};else{let a={get(){this.#f();let a=t.toLowerCase();if(e.has(a)){let e=this.getAttribute(a);return null!==e&&(""===e||e)}return this.get?.(t)??this.nativeEl?.[t]}};t!==t.toUpperCase()&&(a.set=function(a){this.#f();let i=t.toLowerCase();return e.has(i)?void(!0===a||!1===a||null==a?this.toggleAttribute(i,!!a):this.setAttribute(i,a)):this.set?void this.set(t,a):void(this.nativeEl&&(this.nativeEl[t]=a))}),Object.defineProperty(this.prototype,t,a)}}#l=!1;#O=null;#q=new Map;#C;get;set;call;get nativeEl(){return this.#f(),this.#O??this.querySelector(":scope > [slot=media]")??this.querySelector(t)??this.shadowRoot?.querySelector(t)??null}set nativeEl(e){this.#O=e}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(e){this.toggleAttribute("muted",e)}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",`${e}`)}get preload(){return this.getAttribute("preload")??this.nativeEl?.preload}set preload(e){this.setAttribute("preload",`${e}`)}#f(){this.#l||(this.#l=!0,this.init())}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});let e=function(e){let t={};for(let a of e)t[a.name]=a.value;return t}(this.attributes);a&&(e.is=a),t&&(e.part=t),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}for(let e of(this.nativeEl.muted=this.hasAttribute("muted"),d))this.#L(e);for(let e of(this.#C=new MutationObserver(this.#I.bind(this)),this.shadowRoot.addEventListener("slotchange",()=>this.#N()),this.#N(),this.constructor.Events))this.shadowRoot.addEventListener(e,this,!0)}handleEvent(e){e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail}))}#N(){let e=new Map(this.#q),t=this.shadowRoot?.querySelector("slot:not([name])");(t?.assignedElements({flatten:!0}).filter(e=>["track","source"].includes(e.localName))).forEach(t=>{e.delete(t);let a=this.#q.get(t);a||(a=t.cloneNode(),this.#q.set(t,a),this.#C?.observe(t,{attributes:!0})),this.nativeEl?.append(a),this.#M(a)}),e.forEach((e,t)=>{e.remove(),this.#q.delete(t)})}#I(e){for(let t of e)if("attributes"===t.type){let{target:e,attributeName:a}=t,i=this.#q.get(e);i&&a&&(i.setAttribute(a,e.getAttribute(a)??""),this.#M(i))}}#M(e){e&&"track"===e.localName&&e.default&&("chapters"===e.kind||"metadata"===e.kind)&&"disabled"===e.track.mode&&(e.track.mode="hidden")}#L(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}}attributeChangedCallback(e,t,a){this.#f(),this.#j(e,t,a)}#j(e,t,a){!["id","class"].includes(e)&&(!l.observedAttributes.includes(e)&&this.constructor.observedAttributes.includes(e)||(null===a?this.nativeEl?.removeAttribute(e):this.nativeEl?.getAttribute(e)!==a&&this.nativeEl?.setAttribute(e,a)))}connectedCallback(){this.#f()}}}function d(e){let t="";for(let a in e){if(!r.includes(a))continue;let i=e[a];""===i?t+=` ${a}`:t+=` ${a}="${i}"`}return t}let l=o(globalThis.HTMLElement??class{},{tag:"video"});o(globalThis.HTMLElement??class{},{tag:"audio"})}}]);